<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Basketball Playmaker Pro - Professional basketball play diagramming and animation tool for coaches and players" />
  <meta name="theme-color" content="#1a1a1a" />
  <meta name="author" content="Basketball Playmaker Pro" />

  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Basketball Playmaker Pro" />
  <meta property="og:description" content="Professional basketball play diagramming and animation tool" />

  <title>Basketball Playmaker Pro</title>

  <!-- DNS Prefetch for Performance -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />

  <!-- Critical CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- External Dependencies - Loaded with Proper Strategy -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
    crossorigin="anonymous"
    defer>
  </script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/gifshot/0.4.1/gifshot.min.js"
    crossorigin="anonymous"
    defer>
  </script>

  <!-- Application Logic - Must Load After Dependencies -->
  <script src="app.js" defer></script>
</head>

<body>
  <div id="app-container">

    <!-- Main Toolbar -->
    <nav id="top-toolbar" role="navigation" aria-label="Main toolbar">

      <!-- Play Configuration Section -->
      <div class="toolbar-section">
        <label for="play-name">Play Name:</label>
        <input
          type="text"
          id="play-name"
          placeholder="Untitled Play"
          aria-label="Enter play name" />

        <label for="court-toggle" class="visually-hidden">Court Type</label>
        <select id="court-toggle" aria-label="Select court type">
          <option value="half" selected>Half Court</option>
          <option value="full">Full Court</option>
        </select>
      </div>

      <!-- Action Buttons Section -->
      <div class="toolbar-section">
        <button
          id="new-play"
          class="btn btn-warning"
          aria-label="Create new play">
          ğŸ†• New Play
        </button>

        <button
          id="undo-btn"
          class="btn btn-primary"
          title="Undo last action (Ctrl+Z)"
          aria-label="Undo last action"
          disabled>
          â†¶ Undo
        </button>
        <button
          id="redo-btn"
          class="btn btn-primary"
          title="Redo last undone action (Ctrl+Y)"
          aria-label="Redo last undone action"
          disabled>
          â†· Redo
        </button>

        <button
          id="clear-frame"
          class="btn btn-danger"
          aria-label="Clear current frame">
          ğŸ—‘ï¸ Clear Frame
        </button>
      </div>

      <!-- Playback Controls Section -->
      <div class="toolbar-section">
        <button
          id="animate-play"
          class="btn btn-primary"
          aria-label="Play animation">
          â–¶ï¸ Animate
        </button>
      </div>

      <!-- File Operations Section -->
      <div class="toolbar-section">
        <button
          id="save-play"
          class="btn btn-success"
          aria-label="Save play to file">
          ğŸ’¾ Save
        </button>
        <button
          id="load-play"
          class="btn btn-info"
          aria-label="Load play from file">
          ğŸ“‚ Load
        </button>
        <input
          type="file"
          id="load-file-input"
          class="visually-hidden-input"
          accept=".json"
          aria-label="Select play file to load" />
      </div>

      <!-- Export Options Section -->
      <div class="toolbar-section">
        <button
          id="export-video-btn"
          class="btn btn-info"
          aria-label="Export play as video">
          ğŸ¬ Export Video
        </button>
        <button
          id="export-pdf"
          class="btn btn-warning"
          aria-label="Export play as PDF">
          ğŸ“„ PDF
        </button>
      </div>
    </nav>

    <!-- Instruction Bar -->
    <div id="instruction-bar" role="status" aria-live="polite">
      <span id="instruction-text">Select a tool to begin</span>
    </div>

    <!-- Main Application Area -->
    <main id="main-content">

      <!-- Frame Management Panel -->
      <aside id="frame-panel" role="complementary" aria-label="Frame management">
        <h3>ğŸ“‹ Frames</h3>
        <div
          id="frame-list"
          role="list"
          aria-label="List of animation frames">
        </div>

        <div class="frame-controls">
          <button
            id="add-frame"
            class="btn btn-success"
            aria-label="Add new frame">
            + Add
          </button>
          <button
            id="delete-frame"
            class="btn btn-danger"
            aria-label="Delete current frame">
            - Delete
          </button>
        </div>

        <h3>ğŸ“ Notes</h3>
        <textarea
          id="frame-notes"
          placeholder="Add notes for this frame..."
          aria-label="Frame notes">
        </textarea>
      </aside>

      <!-- Canvas Area -->
      <div id="court-container" role="main" aria-label="Basketball court canvas">
        <canvas
          id="play-canvas"
          role="img"
          aria-label="Basketball play diagram">
        </canvas>
      </div>

      <!-- Drawing Tools Panel -->
      <aside id="drawing-toolbox" role="complementary" aria-label="Drawing tools">
        <h3>ğŸ› ï¸ Tools</h3>

        <!-- Selection Tools -->
        <div class="tool-group" role="group" aria-label="Selection tools">
          <button
            class="tool-btn active"
            data-tool="select"
            aria-label="Select and move player tool"
            aria-pressed="true">
            ğŸ–±ï¸ Move Player
          </button>
          <button
            class="tool-btn"
            data-tool="delete"
            aria-label="Delete item tool"
            aria-pressed="false">
            ğŸ—‘ï¸ Delete Item
          </button>
        </div>

        <!-- Offensive Players -->
        <h4>Offense</h4>
        <div
          class="player-palette"
          id="player-palette-offense"
          role="group"
          aria-label="Offensive players">
          <canvas
            class="player-tool-icon"
            data-player="1"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag offensive player 1 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="2"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag offensive player 2 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="3"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag offensive player 3 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="4"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag offensive player 4 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="5"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag offensive player 5 to court">
          </canvas>
        </div>

        <!-- Defensive Players -->
        <h4>Defense</h4>
        <div
          class="player-palette"
          id="player-palette-defense"
          role="group"
          aria-label="Defensive players">
          <canvas
            class="player-tool-icon"
            data-player="X1"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag defensive player X1 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="X2"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag defensive player X2 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="X3"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag defensive player X3 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="X4"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag defensive player X4 to court">
          </canvas>
          <canvas
            class="player-tool-icon"
            data-player="X5"
            draggable="true"
            tabindex="0"
            role="button"
            aria-label="Drag defensive player X5 to court">
          </canvas>
        </div>

        <!-- Action Tools -->
        <h4>Actions</h4>
        <div class="tool-group" role="group" aria-label="Action tools">
          <button
            class="tool-btn"
            data-tool="assign-ball"
            aria-label="Assign basketball to player"
            aria-pressed="false">
            ğŸ€ Assign Ball
          </button>
          <button
            class="tool-btn"
            data-tool="cut"
            aria-label="Draw cutting movement"
            aria-pressed="false">
            âœ‚ï¸ Cut
          </button>
          <button
            class="tool-btn"
            data-tool="dribble"
            aria-label="Draw dribbling movement"
            aria-pressed="false">
            âš¡ Dribble
          </button>
          <button
            class="tool-btn"
            data-tool="pass"
            aria-label="Draw passing action"
            aria-pressed="false">
            ğŸ¯ Pass
          </button>
          <button
            class="tool-btn"
            data-tool="screen"
            aria-label="Draw screening action"
            aria-pressed="false">
            ğŸ›¡ï¸ Screen
          </button>
          <button
            class="tool-btn"
            data-tool="shoot"
            aria-label="Draw shooting action"
            aria-pressed="false">
            ğŸ¹ Shoot
          </button>
          <button
            class="tool-btn"
            data-tool="move"
            aria-label="Draw defensive movement"
            aria-pressed="false">
            ğŸ‘Ÿ Move (Defense)
          </button>
        </div>
      </aside>
    </main>
  </div>

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="hidden" role="alert" aria-live="assertive">
    <div class="spinner-box">
      <div class="spinner" aria-hidden="true"></div>
      <span id="loading-text">Generating...</span>
    </div>
  </div>

</body>
</html>